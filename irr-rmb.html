<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>伊朗里亚尔今日汇率</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=0.5, maximum-scale=2.0, user-scalable=yes" />
<script type="text/javascript" src="https://www.nowapi.com/style/jquery/1.11.3/jquery.min.js"></script>
<script>
$(document).ready(function(){
     $.ajax({
        type          : 'get',
        async         : false,
        url           : 'http://api.k780.com/?app=finance.rate&scur=IRR&tcur=CNY&appkey=57377&sign=d351c8d920071a9c242aa6e13a6c803d&format=json&jsoncallback=data',
        dataType      : 'jsonp',
        jsonp         : 'callback',
        jsonpCallback : 'data',
        success       : function(data){
if(data.success!='1'){
    alert("系统升级中，请60分钟后再用！");
    exit;
}
//遍历
for(var i in data.result){
	if (i=="rate"){
		var rr = data.result[i];
		var rr2 = (1/rr).toFixed(5);
	}else if (i=="update"){
		var tt = "更新时间："+data.result[i];
	}
		var aa = "1伊朗里亚尔="+rr+"人民币</br></br>";
		var bb = "1人民币="+rr2+"伊朗里亚尔</br></br>";
		var cc = aa+bb+tt;
		document.getElementById("irr").innerHTML=(cc);
	}},
    error:function(){alert('fail');}
	});
});
</script>
<!--计算器样式-->
<style type="text/css">
	.but_ac{
    		width: 80px;
    		height: 60px;
    		background-color : lightgray;
    		font-size: 1.2em;
    	}
	.but{
    		width: 80px;
    		height: 60px;
    		background-color : lightgray;
    		font-size: 1.2em;
    	}
	.screen{
    		width: 350px;
            height: 70px;
            font-size: 1.5em;
            color: white;
            background-color: black;
            text-align:right; 
    	}
</style>
<!--计算器js-->
<script type="text/javascript">
	window.onload=function(){
		var result;
		var str=[];
		var num=document.getElementsByClassName("but");
		var scr=document.getElementsByClassName("screen")[0];
		for(var i=0;i<num.length;i++){
			num[i].onclick=function(){
			if(this.value=="AC"){scr.value="";}
			else if( this.value=="+/-"){
				if(scr.value==""){scr.value="";}
				else if(isNaN(scr.value.charAt(scr.value.length-1))==false&&isNaN(scr.value.charAt(scr.value.length-2))==true)
    	     		{scr.value=scr.value.substr(0,scr.value.length-1)+"("+"-"+scr.value.charAt(scr.value.length-1)+")";}  
     	     	  }
			else if (this.value=="Del"&&this.value!=""){scr.value=scr.value.substr(0,scr.value.length-1);}
			else if(scr.value==""&&this.value=="."){scr.value="0.";}
			else if(this.value=="="){scr.value=eval(scr.value);}
			else if(scr.value==""&&(this.value=="+"||this.value=="-"||this.value=="*"||this.value=="/")){scr.value=="";}
			else {scr.value+=this.value;}
        	}
         }
    }
</script>
</head>
<body>
<div align=center>
<div id="irr"></div>

<h5>计算器</h5>
<!-- 计算器 -->
 <table>
      <tr>
          <td colspan="4"><input class="screen" type="text" disabled /></td>
      </tr>
      <tr>
      	<td><input class="but_ac but" type="button" value="AC" style="color: orange"></td>
      	<td><input class="but_ac but" type="button" value="Del" style="color: orange"></td>
      	<td><input class="but" type="button" value="+/-"></td>
      	<td><input class="but" type="button" value="/"></td>
      </tr>
      <tr>
      	<td><input class="but" type="button" value="7"></td>
      	<td><input class="but" type="button" value="8"></td>
      	<td><input class="but" type="button" value="9"></td>
      	<td><input class="but" type="button" value="*"></td>
      </tr>
      <tr>
      	<td><input class="but" type="button" value="4"></td>
      	<td><input class="but" type="button" value="5"></td>
      	<td><input class="but" type="button" value="6"></td>
      	<td><input class="but" type="button" value="-"></td>
      </tr>
      <tr>
      	<td><input class="but" type="button" value="1"></td>
      	<td><input class="but" type="button" value="2"></td>
      	<td><input class="but" type="button" value="3"></td>
      	<td><input class="but" type="button" value="+"></td>
      </tr>
      <tr>
      	<td colspan="2"><input class="but" type="button" value="0" style="width: 180px"></td>
      	<td><input class="but" type="button" value="."></td>
      	<td><input class="but" type="button" value="=" style="background-color:orange ;color:white"></td>
      </tr>
</table>

</div>
</body>
</html>
